
## 定义

Storm是一个免费并开源的分布式实时计算系统。利用Storm可以很容易做到可靠地处理无限的数据流，像Hadoop批量处理大数据一样，Storm可以实时处理数据。Storm简单，可以使用任何编程语言。

## 来源


> 在Storm之前，进行实时处理是非常痛苦的事情: 需要维护一堆[**消息队列**](https://cloud.tencent.com/developer/article/1006035)和**消费者**，他们构成了非常复杂的图结构。消费者进程从队列里取消息，处理完成后，去更新数据库，或者给其他队列发新消息。\
>这样进行实时处理是非常痛苦的。我们主要的时间都花在关注往哪里发消息，从哪里接收消息，消息如何序列化，真正的业务逻辑只占了源代码的一小部分。一个应用程序的逻辑运行在很多worker上，但这些worker需要各自单独部署，还需要部署消息队列。最大问题是系统很脆弱，而且不是容错的：需要自己保证消息队列和worker进程工作正常。\
>Storm完整地解决了这些问题。它是为分布式场景而生的，抽象了消息传递，会自动地在集群机器上并发地处理流式计算，让你专注于实时处理的业务逻辑。

![](http://ww1.sinaimg.cn/large/005N2p5vgy1fpsdmhmwjfj30m10mkgnp.jpg)

## storm 的特点

1. 编程简单：开发人员只需要关注应用逻辑，而且跟Hadoop类似，Storm提供的编程原语也很简单
2. 高性能，低延迟：可以应用于广告搜索引擎这种要求对广告主的操作进行实时响应的场景。
3. 分布式：可以轻松应对数据量大，单机搞不定的场景
4. 可扩展： 随着业务发展，数据量和计算量越来越大，系统可水平扩展
5. 容错：单个节点挂了不影响应用
6. 消息不丢失：保证消息处理

## storm 的缺陷

1. 如果使用的是自己的消息队列，需要加入消息队列做数据的来源和产出的代码
2. 需要考虑如何做故障处理：如何记录消息队列处理的进度，应对Storm重启，挂掉的场景
3. 需要考虑如何做消息的回退：如果某些消息处理一直失败怎么办？

## storm 的内部消息机制

- 一个主机内的不同线程：LMAX Disruptor
- 主机与主机：ZeroMQ或者Netty
- 计算拓扑之间的通信：Storm并不原生支持，需要自己实现和维护，可以使用消息系统，比如：Kafka，RabbitMQ和数据库等等。


---------

## storm 的通信机制

- 拓扑之间消息传递：storm没实现，需要自己使用Kafka等。
- 一个主机内的不同线程：LMAX Disruptor
- 主机与主机：ZeroMQ或者Netty


## Storm 与 Zookeeper 的关系

Storm的所有的状态信息都是保存在Zookeeper里面，nimbus通过在zookeeper上面写状态信息来分配任务，
supervisor，task通过从zookeeper中读状态来领取任务，同时supervisor, task也会定义发送心跳信息到zookeeper，
使得nimbus可以监控整个storm集群的状态，从而可以重启一些挂掉的task。
ZooKeeper 使得整个storm集群十分的健壮，任何一台工作机器挂掉都没有关系，只要重启然后从zookeeper上面重新获取状态信息就可以了。


## storm 的内存机制

Storm是不负责保存计算结果的，这是应用程序里需要负责的事情，如果数据不大，你可以简单地保存在内存里，也可以每次都更新数据库，也可以采用NoSQL存储。storm并没有像s4 那样提供一个PersistAPI，根据时间或者容量来做存储输出。这部分事情完全交给用户。数据存储之后的展现，也是你需要自己处理的，storm UI只提供对topology 的监控和统计。


Storm是免费开源的分布式实时计算系统。实时性主要在于两方面：一方面所有运算处理都是在内存中进行，节点之间采用效率非常高的zeroMQ进行数据传输，中间数据不落地保存，避免了额外文件IO导致的时间损耗；另一方面Storm就是针对流数据处理，可以对源源不断的来源数据进行实时处理，省去了数据采集时间。Storm与Hadoop最大的区别在于Storm是针对流数据处理，而Hadoop是针对批数据进行处理，两者应用方向很大不同。目前Storm的应用非常广泛，大部分的应用场景是针对访问或操作日志进行分析处理，获取实时的统计数据，用于实时的服务监控或者相关的实时推荐。

Storm是基于数据流的实时处理系统，提供了大吞吐量的实时计算能力。通过数据入口获取每条到来的数据，在一条数据到达系统的时候，立即会在内存中进行相应的计算

跟Hadoop不一样，Storm是没有包括任何存储概念的计算系统。这就让Storm可以用在多种不同的场景下：非传统场景下数据动态到达或者数据存储在数据库这样的存储系统里（或数据是被实时操控其他设备的控制器(如交易系统)所消费）












