
# 1 机器学习简介

### 1.1 机器学习的基础流程

目前的计算机系统是不具备学习能力的，人工规定输入是什么，如何进行计算，输出是什么，这样的方式很死板，不能动态的根据现行的工作环境进行调整以适应生产和科技的新发展。

但人是具备学习能力的。人类能够根据过往的生活经验，对现在、未来发生的情况进行判断、预测。随着人处理更多的事情，获得更多的反馈，人类会不断学习，并且经验在不断增长。这样在下一次遇到类似的情况，就能根据以往的经验做出判断。因此随着人类经验的增长，对事情的判断和预测会越来越准确。

但是计算机并不会这样学习。为了让计算机能够具备和人类一样的学习能力，就有了机器学习的概念。

>**学习**就是系统经过不断重复的工作逐步改进和增强自身能力的过程，当系统在下一次遇到相同或相似的问题时，会比现在处理的更好或者更高效。简单的说，学习即是系统改造其性能的任何过程。由于人类具有强大的学习能力，人们才会自然地想要去设计和制造一台具有学习能力的机器。但是这种简单的识别行为背后是非常复杂的处理机制，这种处理机制就是**机器学习理论。**


下图是机器学习的基础流程图：

![](http://ww1.sinaimg.cn/large/005N2p5vgy1fpy4h98u3kj30in0a4taf.jpg)

机器学习的整个过程都是在模仿人类的学习过程，首先有训练数据作为输入，经过机器学习的算法处理，也就是进行训练，得到一个模型。再有数据进行输入时，就会通过这个模型进行处理，得到预测数据，同时新输入的数据也可以对模型进行改进，使模型更加准确。


### 1.2 算法如何训练模型

机器学习起源于统计学习。统计学习就是用一系列方法，来估计f。f是输入和输出的关系。比如说“相亲”问题，输入的是很多男士（机器学习中的观测值），每一名男士又有各方面的条件（机器学习中的特征），房子、婚史、收入等，输出是女性是否选择和这位男士见面。


![](http://ww1.sinaimg.cn/large/005N2p5vly1fu25i70gdvj30p90a93yt.jpg)


在上表中，可看出：如果一个男性在城市无房产、年收入小于 17w 且离过婚，则可以预测女孩不会跟他见面。

再比如一个超市想通过统计学习的方法来提高产品的销量。问题描述如下：


    • 问题：如何提升指定产品的销量
    • 已有的广告数据集
        ○ 在200个超市中的产品销量数据
        ○ 每个超市对产品的广告投入
        ○ 广告投放方式包括电视、广播和报纸。
    • 解决途径：通过改变对不同类型的广告的投入，使收益最大化，进而提高收入。
    • 建模思路：找到广告与销量之间的关系，构建模型，可以使客户间接地提高销量。
    • 输入：广告预算：X1，X2，X3。
    • 输出：销量：Y

下图是对不同媒体方式的广告投入与销量之间的关系的预测：

![](http://ww1.sinaimg.cn/large/005N2p5vly1fu2bf9ch5hj31jc0p4dqm.jpg)


**预测f的目的是：预测出尽可能精准的函数，并具有较强的抗噪声能力（避免过拟合），不同的数据集训练出来的模型的预测结果的差异尽可能小（即模型的稳定性高）。**


# 2 AIOps的过程

### 2.1 智能运维

将机器学习应用到智能运维中，需要如下方面的支持：

- **数据**。互联网应用本身具有海量的日志。需要做优化存储。 数据不够还需要自主生成。
- **标注的数据**。日常运维工作会产生标注的数据。 比如出了一次事件后，运维工程师会记录下过程， 这个过程会反馈到系统之中， 反过来提升运维水平。
- **应用**。运维工程师是智能运维系统的用户。 用户使用过程发现的问题可以对智能系统的优化起正向反馈作用。


![](http://ww1.sinaimg.cn/large/005N2p5vly1fu2e85dgzij30dw08aju5.jpg)


上图表示运维人员判断 KPI 曲线的异常并标注出来， 系统对标注的特征数据进行学习。这是典型的监督式学习，需要高效的标注工具来节省运维人员的时间： 如可以拖拽，放大等方式。


### 2.2 主要组件

1. **异常检测**：

![](http://ww1.sinaimg.cn/large/005N2p5vly1fu7bs1r4g3j31r00vsnfz.jpg)

2. **异常定位**：当业务指标发生剧烈波动时，我们找到该业务的哪些模块的哪些指标也同时发生了波动，并根据关联程度进行排序，给出最可能的根因位置，供运维人员进行定位。

![](http://ww1.sinaimg.cn/large/005N2p5vly1fu7bqakeopj31rw0uy19r.jpg)

### 2.3 AIOps落地过程需要的算法



1. 判断KPI取现异常的模型的训练：通过聚类分析，将类似的故障集中，再抽取出一个典型样例，将其KPI曲线提供给运维专家来标注异常。
    1. 聚类是一种无监督式学习。在训练模型的数据中，对于给定的没有标注的输入X，我们不知道其分类Y是什么，但是可以根据X的特征进行分组
    2. 聚类的目的是：历史数据量过大，如果让运维人员对每一个问题都进行人工标注，则工作量过大。因此通过聚类的方式，将无标注的数据进行分组，这样就能提取出几种典型错误，运维人员只需标注一次就能起到同时标注好多错误的作用，节省了大量时间。

2. 根据标注好的异常，进行异常检测。异常检测所需算法为时序数据分析算法。
3. 故障定位：联动分析算法。首先根据组件之间的物理关系和逻辑关系，构造出一颗故障树，即可能的故障传播关系。如果对故障树的每一条边进行分析，计算量过大，因此通过决策树的剪枝方法放大故障树的节点粒度，构成一个故障树的超集。其中，剪枝的方法就是联动分析算法，通过联动分析算法，找出可能的故障传播关系，进行剪枝。最终形成故障传播过程。
    1. 联动分析算法：当业务指标发生剧烈波动时，我们找到该业务的哪些模块的哪些指标也同时发生了波动，并根据关联程度进行排序，给出最可能的根因位置，供运维人员进行定位。联动分析算法也属于时序数据分析算法中的一种。


### 2.4 














































